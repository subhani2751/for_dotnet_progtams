<html>
<head>
    <style>
        #I, #N, #S, #DOB, #E, #A, #G, #Q {
            color: red;
            padding-left: 15px;
        }

        #forload {
            position: fixed;
            left: 0px;
            top: 0px;
            width: 100%;
            height: 100%;
            z-index: 1000;
            background: url('pageloader.gif') no-repeat center center;
        }
    </style>
    <script src="~/Scripts/jquery-3.6.3.js"></script>
    <script src="~/Scripts/jquery-3.6.3.min.js"></script>
    <script>
        function clearData() {
            $('#id').val("");
            $('#Name').val("");
            $('#salary').val("");
            $('#dob').val("");
            $('#email').val("");
            $('#address').val("");
            $('#qul').val("0");
            $("#Male").prop("checked", false);
            $("#Female").prop("checked", false);
            $('#id').prop('disabled', false);
        }
        function validations() {
            clear();
            var id = IDval();
            var name = Nameval();
            var salary = Salaryval();
            var dob = dobval();
            var email = Emailval();
            var add = Addval();
            var gender = Genderval();
            var dl = Dropval();
            if (id == true && name == true && salary == true && dob == true && email == true && add == true && gender == true && dl == true) {

                //var data = {
                //    Id: $('#id').val(),
                //    Name: $('#Name').val(),
                //    Salary: $("#salary").val(),
                //    //DOB: $("#dob").val(),
                //    //Email: $("#email").val(),
                //    //ADD: $('#address').val(),
                //    //G: $('input[name="Gender"]:checked').val(),
                //    //Dl: $('#qul').val()
                //};
                return true;
            }
            else {
                return false;
            }
        }
        //clear all function
        function clear() {
            $('#I').text("");
            $('#N').text("");
            $('#S').text("");
            $('#DOB').text("");
            $('#E').text("");
            $('#A').text("");
            $('#G').text("");
            $('#Q').text("");
        }
        // validation for ID
        function IDval() {
            var id = $('#id').val();
            if (id == "" || id == null) {
                $('#I').text("id should not be emplty");
                return false;
            }
            else {
                if (id.match("[0-9]")) {
                    if (eval(id) >= 0 && eval(id) <= 100) {
                        return true;
                    }
                    else {
                        $('#I').text("only enter numbers between 0 to 100 ");
                        return false;
                    }
                }
                else {
                    $('#I').text("only enter numbers");
                    return false;
                }
            }

        }
        // validation for Name
        function Nameval() {
            var name = $('#Name').val();
            if (name == null || name == "") {
                $('#N').text("Name should not be emplty");
                return false;
            }
            else {
                if ($.trim(name) != "") {
                    if (name.match("[a-zA-Z ]+")) {
                        if (name.length > 5) {
                            return true;
                        }
                        else {
                            $('#N').text("name must contain more than 5 characters");
                            return false;
                        }
                    }
                    else {
                        $('#N').text("only enter alphabets");
                        return false;
                    }
                }
                else {
                    $('#N').text("Please enter name not spaces");
                    return false;
                }
            }
        }
        // validation for Salary
        function Salaryval() {
            var sal = $('#salary').val();
            if (sal == null || sal == "") {
                $('#S').text("salary should not be emplty");
                return false;
            }
            else {
                if (sal.match("[0-9]+(\.[0-9]{1,2})?")) {
                    return true;
                }
                else {
                    $('#S').text("enter indian currency formate");
                    return false;
                }
            }
        }
        // validation for Date of birth
        function dobval() {
            var dob = $('#dob').val();
            if (dob == null || dob == "") {
                $('#DOB').text("Please select your date of birth");
                return false;
            }
            else {
                return true;
            }
        }
        // validation for Email
        function Emailval() {
            var email = $('#email').val();
            if (email == null || email == "") {
                $('#E').text("please enter your email");
                return false;
            }
            else {
                if (email.match(/^([\w-\.]+)@@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/)) {
                    return true;
                }
                else {
                    $('#E').text("enter valid email addresss");
                    return false;
                }
            }
        }
        //validation for address
        function Addval() {
            var add = $('#address').val();
            if (add == null || add == "") {
                $('#A').text("Please enter your address");
                return false;
            }
            else {
                if ($.trim(add) != "") {

                    if (add.length >= 15) {
                        return true;
                    }
                    else {
                        $('#A').text("address contains more than 15 characters");
                        return false;
                    }
                }
                else {
                    $('#A').text("enter your address not spaces");
                    return false;
                }
            }
        }
        //validation for gender
        function Genderval() {
            /*var g = $('#gender').val();*/
            var g = $('input[name="gender"]:checked').val();
            if (g == "" || g == null || g == undefined) {
                $('#G').text("Please select your gender");
                return false;
            }
            else {
                return true;
            }
        }
        //Validation for Qualification
        function Dropval() {
            var dl = $('#qul').val();
            if (dl == "0") {
                $('#Q').text("Select your Qualification");
                return false;
            }
            else {
                return true;
            }
        }
        //function for AJAX
        function Save() {
            var val = validations();
            if (val) {
                var ID = $('#id').val();
                var Name = $('#Name').val();
                var Salary = $("#salary").val();
                var DOB = $("#dob").val();
                var Email = $("#email").val();
                var ADD = $('#address').val();
                /*var g = $('#gender').val();*/
                var g = $('input[name="gender"]:checked').val();
                var Dl = $('#qul').val();
                var data = {
                    ID: $('#id').val(),
                    Name: $('#Name').val(),
                    Salary: $("#salary").val(),
                    DOB: $("#dob").val(),
                    Email: $("#email").val(),
                    Address: $('#address').val(),
                    Gender: $('input[name="gender"]:checked').val(),
                    Qualification: $('#qul').val()
                };
                /*let lstKeyValue = [];*/
                //lstKeyValue.push({ key: "ID", value: ID });
                //lstKeyValue.push({ key: "Name", value: Name });
                //lstKeyValue.push({ key: "Salary", value: Salary });
                //lstKeyValue.push({ key: "DOB", value: DOB });
                //lstKeyValue.push({ key: "Email", value: Email });
                //lstKeyValue.push({ key: "ADD", value: ADD });
                //lstKeyValue.push({ key: "G", value: g });
                //lstKeyValue.push({ key: "Dl", value: Dl });
                //lstKeyValue = JSON.stringify(lstKeyValue);
                $.ajax({
                    type: "POST",
                    url: "/Subhani/Add",
                    data: JSON.stringify(data),
                    dataType: 'JSON',
                    contentType: 'application/json; charset=utf-8',
                    success: function (result) {
                        if (result != null) {
                            alert(result + "record inserted successfully...");
                            clearData();
                        }
                        else {
                            alert("something went wrong");
                        }
                    },
                    failure: function (result) {
                        alert(result);
                    },
                    error: function (Msg) {
                        alert(Msg);
                    }
                });
            }

        }
        $(document).ready(function () {
            $('#DData').hide();
            $('#btn2').hide();
        })
        function DisplayTable() {
            $('#DData').show();
            taldata();
        }
        function HideTable() {
            $('#DData').hide();
            $('#btn2').hide();
            clearData();
            $('#btn1').show();
            clear();
        }
        function taldata() {
            $.ajax({
                type: "get",
                url: "/Subhani/AllData",
                dataType: 'JSON',
                contentType: 'application/json; charset=utf-8',
                success: function (result) {
                    $('#forload').show();
                    $("#forload").fadeOut(2000);
                    if (result != null) {
                        var html = '';
                        $.each(result, function (key, item) {
                            html += '<tr>';
                            html += '<td>' + item.ID + '</td>';
                            html += '<td>' + item.Name + '</td>';
                            html += '<td>' + item.Salary + '</td>';
                            html += '<td>' + item.DOB + '</td>';
                            html += '<td>' + item.Email + '</td>';
                            html += '<td>' + item.Address + '</td>';
                            html += '<td>' + item.Gender + '</td>';
                            html += '<td>' + item.Qualification + '</td>';
                            html += '<td><a href="#" onclick="return Edit(' + item.ID + ')">Edit</a> | <a href="#" onclick="Delele(' + item.ID + ')">Delete</a></td>';
                            html += '</tr>';
                        });
                        $('#tbb').html(html);
                    }
                    else {
                        alert("something went wrong");
                    }
                    $('#forload').hide();
                },
                error: function (Msg) {
                    alert(Msg);
                }
            });
        }
        function Edit(id) {
            $.ajax({
                type: "POST",
                url: "/Subhani/Edit?id=" + id,
                dataType: 'JSON',
                contentType: 'application/json; charset=utf-8',
                success: function (result) {
                    if (result != null) {
                        $('#id').val(result.ID);
                        $('#id').prop('disabled', true);
                        $('#Name').val(result.Name);
                        $('#salary').val(result.Salary);
                        $('#dob').val(result.DOB);
                        $('#email').val(result.Email);
                        $('#address').val(result.Address);
                        $('#qul').val(result.Qualification);
                        var g = result.Gender
                        if (g == "Male") {
                            $("#Male").prop("checked", true);
                        } else if (g == "Female") {
                            $("#Female").prop("checked", true);
                        }
                    }
                    else {
                        alert("something went wrong");
                    }
                    $('#btn2').show();
                    $('#btn1').hide();
                    clear();
                },
                failure: function (result) {
                    alert(result);
                },
                error: function (Msg) {
                    alert(Msg);
                }
            });
        }
        function Delele(ID) {
            $.ajax({
                type: "POST",
                url: "/Subhani/Delele?id=" + ID,
                dataType: 'JSON',
                contentType: 'application/json; charset=utf-8',
                success: function (result) {
                    taldata();
                },
                error: function (Msg) {
                    alert(Msg);
                }
            });
        }
        function update() {
            var val = validations();
            if (val) {
                var ID = $('#id').val();
                var Name = $('#Name').val();
                var Salary = $("#salary").val();
                var DOB = $("#dob").val();
                var Email = $("#email").val();
                var ADD = $('#address').val();
                /*var g = $('#gender').val();*/
                var g = $('input[name="gender"]:checked').val();
                var Dl = $('#qul').val();
                //let lstKeyValue = [];
                //lstKeyValue.push({ key: "ID", value: ID });
                //lstKeyValue.push({ key: "Name", value: Name });
                //lstKeyValue.push({ key: "Salary", value: Salary });
                //lstKeyValue.push({ key: "DOB", value: DOB });
                //lstKeyValue.push({ key: "Email", value: Email });
                //lstKeyValue.push({ key: "ADD", value: ADD });
                //lstKeyValue.push({ key: "G", value: g });
                //lstKeyValue.push({ key: "Dl", value: Dl });
                //lstKeyValue = JSON.stringify(lstKeyValue);
                //var id = "&lstKeyValue=" + lstKeyValue;
                var data = {
                    ID: $('#id').val(),
                    Name: $('#Name').val(),
                    Salary: $("#salary").val(),
                    DOB: $("#dob").val(),
                    Email: $("#email").val(),
                    Address: $('#address').val(),
                    Gender: $('input[name="gender"]:checked').val(),
                    Qualification: $('#qul').val()
                };
                $.ajax({
                    type: "POST",
                    url: "/Subhani/update",
                    data: JSON.stringify(data),
                    dataType: 'JSON',
                    contentType: 'application/json; charset=utf-8',
                    success: function (result) {
                        taldata();
                        clearData();
                        $('#btn2').hide();
                        $('#btn1').show();
                    },
                    failure: function (result) {
                        alert(result);
                    },
                    error: function (Msg) {
                        alert(Msg);
                    }
                });
            }
        }
    </script>
</head>
<body>
    
        <table class="table">
            <tr>
                <th>ID</th>
                @*<td><input type="text" id="id" /></td>*@
                <td>@Html.TextBox("id")</td>
                <td id="I"></td>
            </tr>
            <tr>
                <th>name</th>
                @*<td><input type="text" id="Name" /></td>*@
                <td>@Html.TextBox("Name")</td>
                <td id="N"></td>
            </tr>
            <tr>
                <th>Salary</th>
                @*<td><input type="text" id="salary" /></td>*@
                <td>@Html.TextBox("salary")</td>
                <td id="S"></td>
            </tr>
            <tr>
                <th>Date of Birth</th>
                @*<td><input type="date" id="dob" /></td>*@
                <td>@Html.TextBox("dob")</td>
                <td id="DOB"></td>
            </tr>
            <tr>
                <th>Email</th>
                @*<td><input type="text" id="email" /></td>*@
                <td>@Html.TextBox("email")</td>
                <td id="E"></td>
            </tr>
            <tr>
                <th>Address</th>
                @*<td><textarea id="address"></textarea></td>*@
                <td>@Html.TextArea("address")</td>
                <td id="A"></td>
            </tr>
            <tr>
                <th>Gender</th>
                @*<td><input type="radio" value="Male" name="Gender" />Male&nbsp;<input type="radio" value="Female" name="Gender" />Female</td>*@
            <td>@Html.RadioButton("gender", "Male",new {id= "Male" })Male&nbsp;@Html.RadioButton("gender", "Female", new { id = "Female" })Female</td>
                <td id="G"></td>
            </tr>
            <tr>
                <th>Qalification</th>
                <td>
                    <select id="qul">
                        <option value="0">--select Qualification--</option>
                        <option value="SSC">SSC</option>
                        <option value="Inter">Inter</option>
                        <option value="Degree">Degree</option>
                        <option value="PG">PG</option>
                        <option value="BTech">BTech</option>
                        <option value="MTech">MTech</option>
                    </select>
                </td>
                <td id="Q"></td>
            </tr>
            <tr>
                <td><button onclick="Save()" id="btn1">Save</button>
                    <button onclick="return update()" id="btn2">Update</button></td>
                <td></td>
                <td></td>
            </tr>
        </table>
    <button onclick="DisplayTable()">Display</button>
    <button onclick="HideTable()">Hide</button>
    <table id="DData" class="table">
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Salary</th>
                <th>Date of Birth</th>
                <th>Email</th>
                <th>Address</th>
                <th>Gender</th>
                <th>Qualification</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody id="forload"></tbody>
        <tbody id="tbb">
        </tbody>
    </table>
</body>
</html>

